{% extends "base.html" %}

{% block lab %}Заказ зерна{% endblock %}

{% block main %}
<h1>Заказ зерна</h1>

<form method="post" style="margin-left: 20px;">
    <div>
        <label for="grain_type">Тип зерна:</label><br>
        <select id="grain_type" name="grain_type" style="margin-top: 5px; padding: 5px; width: 200px;">
            <option value="">Выберите зерно</option>
            <option value="barley" {% if request.form.get('grain_type') == 'barley' %}selected{% endif %}>Ячмень</option>
            <option value="oats" {% if request.form.get('grain_type') == 'oats' %}selected{% endif %}>Овёс</option>
            <option value="wheat" {% if request.form.get('grain_type') == 'wheat' %}selected{% endif %}>Пшеница</option>
            <option value="rye" {% if request.form.get('grain_type') == 'rye' %}selected{% endif %}>Рожь</option>
        </select>
    </div>
    
    <div style="margin-top: 15px;">
        <label for="weight">Вес (тонн):</label><br>
        <input type="number" id="weight" name="weight" 
               value="{{ request.form.get('weight') or '' }}" 
               min="0.1" max="100" step="0.1" 
               style="margin-top: 5px; padding: 5px; width: 200px;"
               placeholder="Введите вес">
    </div>
    
    <div style="margin-top: 20px;">
        <button type="submit" style="padding: 8px 16px;">Оформить заказ</button>
        <button type="reset" style="padding: 8px 16px;">Сбросить</button>
    </div>
</form><br>

{% if error %}
<div style="color: crimson; margin-left: 20px">
    {{ error }}
</div>
{% endif %}

{% if success %}
<div style="color: green; margin-left: 20px">
    <h3 style="margin-top: 0; color: green;">Заказ успешно сформирован</h3>
    
    <div>
        <b>Вы заказали:</b> {{ grain_type }}<br>
        <b>Вес:</b> {{ weight }} т<br>
        
        {% if discount_applied %}
        <div style="margin: 10px 0; padding: 10px; background-color: #ffffcc; border-radius: 5px; width: 450px">
            <b>Применена скидка 10% за большой объём!</b><br>
            <span style="color: crimson; font-weight: bold;">
                - {{ discount }} руб
            </span>
        </div>
        {% endif %}
        
        <div style="font-size: 1.2em; margin-top: 10px;">
            <b>Сумма к оплате:</b> 
            <span style="color: green; font-size: 1.3em;">
                {{ total }} руб
            </span>
        </div>
    </div>
</div>
{% endif %}

<div style="margin-top: 30px; padding: 20px;">
    <h3>Прайс-лист:</h3>
    <table style="width: 100%; border-collapse: collapse;">
        <tr>
            <th style="padding: 10px; text-align: left; border: 1px solid #000000;">Тип зерна</th>
            <th style="padding: 10px; text-align: left; border: 1px solid #000000;">Цена за тонну</th>
        </tr>
        <tr>
            <td style="padding: 10px; border: 1px solid #000000;">Ячмень</td>
            <td style="padding: 10px; border: 1px solid #000000;">12 000 руб</td>
        </tr>
        <tr>
            <td style="padding: 10px; border: 1px solid #000000;">Овёс</td>
            <td style="padding: 10px; border: 1px solid #000000;">8 500 руб</td>
        </tr>
        <tr>
            <td style="padding: 10px; border: 1px solid #000000;">Пшеница</td>
            <td style="padding: 10px; border: 1px solid #000000;">9 000 руб</td>
        </tr>
        <tr>
            <td style="padding: 10px; border: 1px solid #000000;">Рожь</td>
            <td style="padding: 10px; border: 1px solid #000000;">15 000 руб</td>
        </tr>
    </table><br>
    
    <div style="margin-left: 15px;">
        <h3>Скидки:</h3>
        При заказе более 10 тонн - скидка 10%<br><br>
        Заказы более 100 тонн временно недоступны
    </div>
</div>
{% endblock %}